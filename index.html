
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>My Blog</title>
	<meta name="author" content="Ruben Espinosa">

	
	<meta name="description" content="Mar 10th, 2014 ruby_on_rails Comments Search Form in Rails 4 + Postgres and Concerns Assumptions This post assume that you are using 2 main gems in &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/github/atom.xml" rel="alternate" title="My Blog" type="application/atom+xml">
	
	<link rel="canonical" href="http://rderoldan1.github.io//github/">
	<link href="/github/favicon.png" rel="shortcut icon">
	<link href="/github/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/github/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-32806011-2']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<script src="/github/javascripts/md5.js"></script>
	<script type="text/javascript">
		$(function(){
			$('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("rderoldan1@gmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
		});
	</script>
	
</div>
<hgroup>
  <h1><a href="/github/">My Blog</a></h1>
  
</hgroup>

<nav id="main-nav"><ul class="main-navigation">
  <li><a href="/github/">Blog</a></li>
  <li><a href="/github/blog/archives">Archives</a></li>
    <li><a href="/github/about">About</a></li>
</ul>


<section class="aboutme">
  <p>
    My personal blog, I'll post personal memories related with tech and computer science
  </p>
</section>
</nav>
<nav id="sub-nav">
	<div class="social">
		
		
		<a class="google" href="https://plus.google.com/109427199248613940454" rel="author" title="Google+">Google+</a>
		
		
		<a class="twitter" href="http://twitter.com/rderoldan1" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/rderoldan1" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		
		<a class="rss" href="/github/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-03-10T22:00:55-05:00" data-updated="true" itemprop="datePublished">Mar 10<sup>th</sup>, 2014</time></div>
		<div class="tags">


	<a class='category' href='/github/blog/categories/ruby-on-rails/'>ruby_on_rails</a>


</div>
		
			<span class="comments"><a href="/github/blog/2014/03/10/search-form-in-rails-4-plus-postgres-and-concerns/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/github/blog/2014/03/10/search-form-in-rails-4-plus-postgres-and-concerns/" itemprop="url">Search Form in Rails 4 + Postgres and Concerns</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h3>Assumptions</h3>

<p>This post assume that you are using 2 main gems in your Rails Application</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># Gemfile</span>
</span><span class='line'>
</span><span class='line'><span class="n">gem</span> <span class="s1">&#39;bootstrap-sass&#39;</span> <span class="c1"># bootstrap 3</span>
</span><span class='line'><span class="n">gem</span> <span class="s1">&#39;will_paginate&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>One of the most interesting features included in Rails 4 is Model and Controller concerns. As
<a href="https://twitter.com/dhh">DHH</a> said in his <a href="http://signalvnoise.com/posts/3372-put-chubby-models-on-a-diet-with-concerns">POST</a>
<em>&ldquo;Concerns are also a helpful way of extracting a slice of model that doesn’t seem part of its essence &hellip; &rdquo;</em>, based on
this, we will create a concern module called <code>Seachable</code> that allow our models to have the ability of be searchable
 using <a href="https://github.com/mislav/will_paginate">will_paginate</a>, always seeking be more DRY as we can.</p>

<div><script src='https://gist.github.com/9478893.js?file=searchable.rb'></script>
<noscript><pre><code>module Searchable
    extend ActiveSupport::Concern

    module ClassMethods
    
      # Search method basen in will_paginate gem
      # params
      #   - string pattern: &quot;Jhon&quot;
      #   - integer page: 10
      #   - array of attribute names as string: [&#39;name&#39;, &#39;email&#39;, &#39;nickname&#39;]
      # Return
      # Wil paginate records
        def search(pattern, page, attr)
            paginate :per_page      =&gt; 20, :page =&gt; page,
                     :conditions    =&gt; string_builder(attr, pattern)
        end

        private
        
        # Build string search and params for conditions based in attributes
        # params 
        #   - array of attribute names as strings: [&#39;name&#39;, &#39;email&#39;, &#39;nickname&#39;]
        #   - string pattern: &quot;Jhon&quot;
        # Return
        #    [&quot;UPPER(cast(name)), UPPER(cast(email)), UPPER(cast(nickname)) LIKE ? or ? or ?&quot;, &quot;%Jhon%&quot;, &quot;%Jhon%&quot;, &quot;%Jhon%&quot;]
        def string_builder(attr, pattern)
            finder ||= &quot;&quot;
            arr = []
            arr &lt;&lt; attr.map{|att| &quot; UPPER(cast(#{att} as text)) LIKE ?&quot;}.join(&#39; or&#39;)
            arr &lt;&lt; attr.map{|att| &#39;%&#39;+pattern.upcase+&#39;%&#39;}
            arr.flatten
        end
    end
end</code></pre></noscript></div>


<h3>2. Include Searchable Method</h3>

<p>We have to include the <code>Searchable</code> concern in each model that we like to add the ability of be searchable.</p>

<div><script src='https://gist.github.com/9478893.js?file=client.rb'></script>
<noscript><pre><code>class Client &lt; ActiveRecord::Base
  # Include Searchable concern
  include Searchable
end  
  </code></pre></noscript></div>




<div><script src='https://gist.github.com/9478893.js?file=clients_controller.rb'></script>
<noscript><pre><code>@clients = Client.search(params[:finder], params[:page], [&#39;name&#39;, &quot;nickname&quot;, &quot;email&quot;, &quot;date&quot;])</code></pre></noscript></div>




<div><script src='https://gist.github.com/9478893.js?file=application_helper.rb'></script>
<noscript><pre><code># app/helpers/application_helper.rb
module ApplicationHelper
    def search_form(path, placeholder)
        form_tag path, class: &quot;well&quot;, :method =&gt; &#39;get&#39; do
            content_tag :div, class: &#39;row&#39; do
                content_tag :div, class: &#39;col-md-6&#39; do
                    content_tag :div, class: &#39;input-group&#39; do
                        text_field_tag(:finder, params[:finder], :class =&gt; &quot;form-control input-sm&quot;, :placeholder =&gt; placeholder)+
                        content_tag(:span, class: &#39;input-group-btn&#39;) do
                            submit_tag(&quot;Buscar&quot;, :class =&gt; &#39;btn btn-success btn-sm spin&#39;)
                        end
                    end
                end.concat(
                content_tag(:div, class: &#39;col-md-6 pull-right&#39;) do
                    content_tag :div, class: &#39;btn-group&#39; do
                        link_to(&quot;Excel&quot;, url_for(params.merge(:format =&gt; &quot;xls&quot;, :only_path =&gt; false)), :class =&gt; &quot;btn btn-primary btn-sm&quot; )+
                        link_to(&quot;CSV&quot;, url_for(params.merge(:format =&gt; &quot;csv&quot;, :only_path =&gt; false)), :class =&gt; &quot;btn btn-primary btn-sm&quot; )+
                        link_to(&quot;PDF&quot;, url_for(params.merge(:format =&gt; &quot;pdf&quot;, :only_path =&gt; false)), :class =&gt; &quot;btn btn-primary btn-sm&quot; )
                    end
                end )
            end
        end
    end
end</code></pre></noscript></div>




<div><script src='https://gist.github.com/9478893.js?file=index.html.erb'></script>
<noscript><pre><code>&lt;%= search_form(cients_path, &quot;Search by Name or Nickname&quot; ) %&gt;</code></pre></noscript></div>


<p><img src="/github/images/search1.png" title="Ninja Attack!" ></p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-10-23T17:24:00-05:00" data-updated="true" itemprop="datePublished">Oct 23<sup>rd</sup>, 2013</time></div>
		<div class="tags">


	<a class='category' href='/github/blog/categories/estrategias-didacticas/'>estrategias-didacticas</a>, <a class='category' href='/github/blog/categories/mestria/'>mestria</a>


</div>
		
			<span class="comments"><a href="/github/blog/2013/10/23/maestria-ingenieria-nueva-meta/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/github/blog/2013/10/23/maestria-ingenieria-nueva-meta/" itemprop="url">Maestría en Ingeniería, Nueva Meta</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Luego de un mes de haber empezado mis clases de maestría en ingeniería con enfasís en TIC para la educación, en el cual hago parte de dos cursos este primer semestre(<em>Ambientes de aprendizaje</em> y <em>Contexto TIC</em>), los cuales se encuentran conformados por 25 profesores de instituciones educativas (Primaria y Secundaria) de la ciudad de Itagüí, los cuales se encuentran trabajando en un proyecto bastante ambisioso, el cual pretende mejorar la educación en dicha ciudad.</p>

<p>Durante este mes, en el cual he compartido con estas personas y he trabajado en algunas actividades he aprendido de el tema de la educación, el cual es totalmente desconocido para mi y he sido testigo de como el plan TESO a pesar de llevar poco mas de dos años de haberse iniciado, empieza a tener resultados muy positivos, y todo esto gracias a la decisión y compromiso del gobierno, docentes y directivos. Al mismo tiempo siento que en lo poco que llevamos he apoyado a algunos compañeros en el uso de herramientas tecnológicas, a las cuales desde mi profesión se han convertido en el día a día pero para ellos son muy nuevas, pero pueden ser muy utiles en la implementación de modelos de colaboración en las aulas de clase.</p>

<p>Hoy se que tengo mucho por aprender y mucho por aportar en este proceso que apenas comienza, el cual traera muchos retos y muchos logros.</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-09-25T14:43:00-05:00" data-updated="true" itemprop="datePublished">Sep 25<sup>th</sup>, 2013</time></div>
		<div class="tags">


	<a class='category' href='/github/blog/categories/random/'>random</a>


</div>
		
			<span class="comments"><a href="/github/blog/2013/09/25/first-blog-page/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/github/blog/2013/09/25/first-blog-page/" itemprop="url">First Blog Page</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>This is my first octopress blog, so I&rsquo;m trying to create some code, this post would be
a little crazy because I&rsquo;m learning the Jekyll sintax</p>

<p>I had help a woman in linkedin who have a problem using <code>wicked_pdf</code></p>

<p> <div><script src='https://gist.github.com/6684698.js?file=controller.rb'></script>
<noscript><pre><code>#action show
def show
  @object = Model.firts
  respond_to do |format|</p>

<pre><code>format.html
format.pdf {render :pdf =&amp;gt; &amp;quot;pdf_name}
</code></pre>

<p>  end
end</code></pre></noscript></div></p>


		
		<a href="/github/blog/2013/09/25/first-blog-page/" class="more-link">Read on &rarr;</a>
	</div>

</article>

</div>
<nav id="pagenavi">
    
    
    <div class="center"><a href="/github/blog/archives">Blog Archives</a></div>
</nav></div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright &copy; 2014 - Ruben Espinosa -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
			

<script type="text/javascript">
      var disqus_shortname = 'respinos';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





		</div>
	</div>
</body>
</html>

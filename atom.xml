<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[My Blog]]></title>
  <link href="http://rderoldan1.github.io//github/atom.xml" rel="self"/>
  <link href="http://rderoldan1.github.io//github/"/>
  <updated>2014-07-03T14:44:48-05:00</updated>
  <id>http://rderoldan1.github.io//github/</id>
  <author>
    <name><![CDATA[Ruben Espinosa]]></name>
    <email><![CDATA[rderoldan1@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Search form in Rails 4 + Postgres and Concerns]]></title>
    <link href="http://rderoldan1.github.io//github/blog/2014/03/10/search-form-in-rails-4-plus-postgres-and-concerns/"/>
    <updated>2014-03-10T22:00:55-05:00</updated>
    <id>http://rderoldan1.github.io//github/blog/2014/03/10/search-form-in-rails-4-plus-postgres-and-concerns</id>
    <content type="html"><![CDATA[<h3>Assumptions</h3>

<p>This post assume that you are using 2 main gems in your Rails Application</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># Gemfile</span>
</span><span class='line'>
</span><span class='line'><span class="n">gem</span> <span class="s1">&#39;bootstrap-sass&#39;</span> <span class="c1"># bootstrap 3</span>
</span><span class='line'><span class="n">gem</span> <span class="s1">&#39;will_paginate&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>One of the most interesting features included in Rails 4 is Model and Controller concerns. As
<a href="https://twitter.com/dhh">DHH</a> said in his <a href="http://signalvnoise.com/posts/3372-put-chubby-models-on-a-diet-with-concerns">POST</a>
<em>&ldquo;Concerns are also a helpful way of extracting a slice of model that doesn’t seem part of its essence &hellip; &rdquo;</em>, based on
this, we will create a concern module called <code>Seachable</code> that allow our models to have the ability of be searchable
 using <a href="https://github.com/mislav/will_paginate">will_paginate</a>, always seeking be more DRY as we can.</p>

<div><script src='https://gist.github.com/9478893.js?file=searchable.rb'></script>
<noscript><pre><code>module Searchable
    extend ActiveSupport::Concern

    module ClassMethods
    
      # Search method basen in will_paginate gem
      # params
      #   - string pattern: &quot;Jhon&quot;
      #   - integer page: 10
      #   - array of attribute names as string: [&#39;name&#39;, &#39;email&#39;, &#39;nickname&#39;]
      # Return
      # Wil paginate records
        def search(pattern, page, attr)
            paginate :per_page      =&gt; 20, :page =&gt; page,
                     :conditions    =&gt; string_builder(attr, pattern)
        end

        private
        
        # Build string search and params for conditions based in attributes
        # params 
        #   - array of attribute names as strings: [&#39;name&#39;, &#39;email&#39;, &#39;nickname&#39;]
        #   - string pattern: &quot;Jhon&quot;
        # Return
        #    [&quot;UPPER(cast(name)), UPPER(cast(email)), UPPER(cast(nickname)) LIKE ? or ? or ?&quot;, &quot;%Jhon%&quot;, &quot;%Jhon%&quot;, &quot;%Jhon%&quot;]
        def string_builder(attr, pattern)
            finder ||= &quot;&quot;
            arr = []
            arr &lt;&lt; attr.map{|att| &quot; UPPER(cast(#{att} as text)) LIKE ?&quot;}.join(&#39; or&#39;)
            arr &lt;&lt; attr.map{|att| &#39;%&#39;+pattern.upcase+&#39;%&#39;}
            arr.flatten
        end
    end
end</code></pre></noscript></div>


<h3>2. Include Searchable Method</h3>

<p>We have to include the <code>Searchable</code> concern in each model that we like to add the ability of be searchable.</p>

<div><script src='https://gist.github.com/9478893.js?file=client.rb'></script>
<noscript><pre><code>class Client &lt; ActiveRecord::Base
  # Include Searchable concern
  include Searchable
end  
  </code></pre></noscript></div>




<div><script src='https://gist.github.com/9478893.js?file=clients_controller.rb'></script>
<noscript><pre><code>@clients = Client.search(params[:finder], params[:page], [&#39;name&#39;, &quot;nickname&quot;, &quot;email&quot;, &quot;date&quot;])</code></pre></noscript></div>




<div><script src='https://gist.github.com/9478893.js?file=application_helper.rb'></script>
<noscript><pre><code># app/helpers/application_helper.rb
module ApplicationHelper
    def search_form(path, placeholder)
        form_tag path, class: &quot;well&quot;, :method =&gt; &#39;get&#39; do
            content_tag :div, class: &#39;row&#39; do
                content_tag :div, class: &#39;col-md-6&#39; do
                    content_tag :div, class: &#39;input-group&#39; do
                        text_field_tag(:finder, params[:finder], :class =&gt; &quot;form-control input-sm&quot;, :placeholder =&gt; placeholder)+
                        content_tag(:span, class: &#39;input-group-btn&#39;) do
                            submit_tag(&quot;Buscar&quot;, :class =&gt; &#39;btn btn-success btn-sm spin&#39;)
                        end
                    end
                end.concat(
                content_tag(:div, class: &#39;col-md-6 pull-right&#39;) do
                    content_tag :div, class: &#39;btn-group&#39; do
                        link_to(&quot;Excel&quot;, url_for(params.merge(:format =&gt; &quot;xls&quot;, :only_path =&gt; false)), :class =&gt; &quot;btn btn-primary btn-sm&quot; )+
                        link_to(&quot;CSV&quot;, url_for(params.merge(:format =&gt; &quot;csv&quot;, :only_path =&gt; false)), :class =&gt; &quot;btn btn-primary btn-sm&quot; )+
                        link_to(&quot;PDF&quot;, url_for(params.merge(:format =&gt; &quot;pdf&quot;, :only_path =&gt; false)), :class =&gt; &quot;btn btn-primary btn-sm&quot; )
                    end
                end )
            end
        end
    end
end</code></pre></noscript></div>




<div><script src='https://gist.github.com/9478893.js?file=index.html.erb'></script>
<noscript><pre><code>&lt;%= search_form(cients_path, &quot;Search by Name or Nickname&quot; ) %&gt;</code></pre></noscript></div>


<p><img src="http://rderoldan1.github.io//github/images/search1.png" title="Ninja Attack!" ></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Maestría en Ingeniería, nueva meta]]></title>
    <link href="http://rderoldan1.github.io//github/blog/2013/10/23/maestria-ingenieria-nueva-meta/"/>
    <updated>2013-10-23T17:24:00-05:00</updated>
    <id>http://rderoldan1.github.io//github/blog/2013/10/23/maestria-ingenieria-nueva-meta</id>
    <content type="html"><![CDATA[<p>Luego de un mes de haber empezado mis clases de maestría en ingeniería con enfasís en TIC para la educación, en el cual hago parte de dos cursos este primer semestre(<em>Ambientes de aprendizaje</em> y <em>Contexto TIC</em>), los cuales se encuentran conformados por 25 profesores de instituciones educativas (Primaria y Secundaria) de la ciudad de Itagüí, los cuales se encuentran trabajando en un proyecto bastante ambisioso, el cual pretende mejorar la educación en dicha ciudad.</p>

<p>Durante este mes, en el cual he compartido con estas personas y he trabajado en algunas actividades he aprendido de el tema de la educación, el cual es totalmente desconocido para mi y he sido testigo de como el plan TESO a pesar de llevar poco mas de dos años de haberse iniciado, empieza a tener resultados muy positivos, y todo esto gracias a la decisión y compromiso del gobierno, docentes y directivos. Al mismo tiempo siento que en lo poco que llevamos he apoyado a algunos compañeros en el uso de herramientas tecnológicas, a las cuales desde mi profesión se han convertido en el día a día pero para ellos son muy nuevas, pero pueden ser muy utiles en la implementación de modelos de colaboración en las aulas de clase.</p>

<p>Hoy se que tengo mucho por aprender y mucho por aportar en este proceso que apenas comienza, el cual traera muchos retos y muchos logros.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[First Blog page]]></title>
    <link href="http://rderoldan1.github.io//github/blog/2013/09/25/first-blog-page/"/>
    <updated>2013-09-25T14:43:00-05:00</updated>
    <id>http://rderoldan1.github.io//github/blog/2013/09/25/first-blog-page</id>
    <content type="html"><![CDATA[<p>This is my first octopress blog, so I&rsquo;m trying to create some code, this post would be
a little crazy because I&rsquo;m learning the Jekyll sintax</p>

<p>I had help a woman in linkedin who have a problem using <code>wicked_pdf</code></p>

<p> <div><script src='https://gist.github.com/6684698.js?file=controller.rb'></script>
<noscript><pre><code>#action show
def show
  @object = Model.firts
  respond_to do |format|</p>

<pre><code>format.html
format.pdf {render :pdf =&amp;gt; &amp;quot;pdf_name}
</code></pre>

<p>  end
end</code></pre></noscript></div></p>

<!-- more -->

]]></content>
  </entry>
  
</feed>
